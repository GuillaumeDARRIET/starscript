/**
* StarLib 1.0.3
* author DARRIET GUILLAUME 
* https://lebonnumero.fr/
*
*/
Star.Package("Star",Star.Interface("StarEventDispatcher",{on:function(b,c,d){return this.__eventDispatcherInit(b),this.__eventDispatcherHandlers[b].push(c),this.__eventDispatcherParams[b].push(d),this},off:function(b,c){if(this.__eventDispatcherInit(b),b)if(c){var d=this.__eventDispatcherHandlers[b].indexOf(c);d!=-1&&(this.__eventDispatcherHandlers[b].splice(d,1),this.__eventDispatcherParams[b].splice(d,1))}else delete this.__eventDispatcherHandlers[b],delete this.__eventDispatcherParams[b];else this.__eventDispatcherHandlers={},this.__eventDispatcherParams={};return this},trigger:function(b,c){this.__eventDispatcherInit(b),c||(c={}),c.eventName=b,c.dispatcher=this,this.__eventDispatcherInit(b);for(var d=this.__eventDispatcherHandlers[b].length,e=0;e<d;e++)this.__eventDispatcherHandlers[b][e].apply(null,[c,this.__eventDispatcherParams[b][e]]);return this},__eventDispatcherInit:function(b){b&&(this.__eventDispatcherHandlers||(this.__eventDispatcherHandlers={},this.__eventDispatcherParams={}),this.__eventDispatcherHandlers[b]||(this.__eventDispatcherHandlers[b]=[],this.__eventDispatcherParams[b]=[]))}})),Star.Package("Star",Star.Interface("StarTemplate",{__templateEvalScope:function(b,c){var arguments=[],d=[];for(var e in c)d.push(c[e]),arguments.push(e);arguments.push("__expressionToEvaluate"),d.push(b);var f="var print = function(msg){return msg;}; ";f+="return eval(__expressionToEvaluate);",arguments.push(f);var g=Function.apply(null,arguments);return g.apply(null,d)},template:function(b,c){var d=/\<\%([\s\S]*?)\%\>/gm,e=b.match(d);if(!e||0===e.length)return b;for(var f,g=0;g<e.length;g++){if(f=e[g],"="===f.substr(2,1)){f=f.substring(3),f=f.substring(0,f.length-2).trim();var h=f.split('"').join('\\"');f=" try {print("+f+');}catch(e){print("<%='+h+'%>");}'}else f=f.substring(2),f=f.substring(0,f.length-2);var i=this.__templateEvalScope(f,c),j=typeof i;"number"===j||"string"===j?i+="":i="",b=b.split(e[g]).join(i)}return b}})),Star.Package("Star",Star.Class("StarRouter",[null,Star.StarEventDispatcher],{pathname:"",baseURI:"/",uri:"",autorizedLangs:[],alias:{},lang:"",params:[],route:"",routeAlias:"",construct:function(){if(null!==Star.StarRouter.Static.instance)throw"ConflictSingleton: Star Router must be unique";var b=document.getElementsByTagName("base");if(b.length<1)throw'MissingBase: Add a base tag in head of document with relative path in href attribute, like <base href="/relative/path/"> or <base href="/">';if(this.baseURI=b[0].getAttribute("href"),"http"===this.baseURI.substr(0,4))throw"BaseHrefError: use relative path in base tag";if("/"!=this.baseURI.substr(0,1)||"/"!=this.baseURI.substr(this.baseURI.length-1,1))throw"BaseHrefError: base href must start and finish by / ";this.__parsePathname(window.location.pathname,!0,!0),window.addEventListener("popstate",this.__onPopState)},__onPopState:function(b){this.__parsePathname(window.location.pathname,!0),this.trigger("change")},__onClickHyperlink:function(b){b.preventDefault();var c=b.currentTarget,d=c.getAttribute("href");d&&this.setURI(d)},__parsePathname:function(b,c,d){this.route="",this.routeAlias="",this.params=[];var e=b;c&&(e=b.substring(this.baseURI.length));var f=e.split("/"),g="";if(""!=this.lang){if(f.length>0&&f[0]!=this.lang&&this.autorizedLangs.indexOf(f[0])!==-1){if(!d)return void(window.location.href=this.baseURI+e);this.lang=f[0]}f.length>0&&f[0]===this.lang&&(f=f.slice(1))}f.length>0&&(g=f[0]),f.length>1&&(this.params=f.slice(1)),1===this.params.length&&""===this.params[0]&&(this.params=[]),this.routeAlias=g,this.alias[g]?this.route=this.alias[g]:this.route=g,this.uri=(""===this.lang?"":this.lang+"/")+g+(this.params.length>0?"/"+this.params.join("/"):""),this.pathname=this.baseURI+this.uri},catchHyperlink:function(b){if(b)for(var d,c=b.getElementsByTagName("a"),e=0;e<c.length;e++)d=c[e].getAttribute("href"),c[e].className.indexOf("StarHyperlink")===-1&&d&&"http"!=d.substr(0,4)&&"mailto"!=d.substr(0,6)&&"tel"!=d.substr(0,3)&&(c[e].className+=" StarHyperlink",c[e].addEventListener("click",this.__onClickHyperlink),c[e].addEventListener("touchstart",this.__onClickHyperlink))},addAlias:function(b,c){if("string"==typeof b&&"string"==typeof c)this.alias[b]=c;else if("object"==typeof b)for(var d in b)this.alias[d]=b[d];this.alias[this.route]&&(this.route=this.alias[this.route])},setURI:function(b){this.__parsePathname(b),history.pushState(null,null,this.pathname),this.trigger("change")},getURI:function(){var b=(""===this.lang?"":this.lang+"/")+this.route+(this.params.length>0?"/"+this.params.join("/"):"");return b},getLang:function(){return this.lang},getRoute:function(){return this.route},getRouteAlias:function(){return this.routeAlias},getParams:function(){return this.params},localization:function(b,c){return this.autorizedLangs=c,this.lang=b,this.__parsePathname(window.location.pathname,!0,!0),history.replaceState(null,null,this.pathname),this.lang}},{instance:null,getInstance:function(){return null===Star.StarRouter.Static.instance&&(Star.StarRouter.Static.instance=Star.StarRouter()),Star.StarRouter.Static.instance}})),Star.Package("Star",Star.Class("StarView",[null,Star.StarEventDispatcher,Star.StarTemplate],{name:"",domID:"",container:null,dataFiles:[],htmlFiles:[],cssFiles:[],data:{},cssID:"",renderClearContainer:!0,router:null,construct:function(){this.router=Star.StarRouter.Static.getInstance(),""!=this.domID&&(this.container=document.getElementById(this.domID))},render:function(){this.removeListeners(),this.extractData(),this.container&&this.renderClearContainer&&(this.container.innerHTML=""),this.appendHTML(),this.appendCSS(),this.router.catchHyperlink(this.container)},extractData:function(){for(var b,c=0;c<this.dataFiles.length;c++){b=JSON.parse(Star.GetFile(this.dataFiles[c]));for(var d in b)this.data[d]=b[d]}},appendCSS:function(){var b;if(""===this.cssID||(b=document.getElementById(this.cssID),!b||""===b.innerHTML)){for(var c,d="",e=0;e<this.cssFiles.length;e++)c=Star.GetFile(this.cssFiles[e]),c=this.template(c,this.data),d+=c;var f=document.createElement("style");f.innerHTML=d,b?b.appendChild(f):this.container&&this.container.appendChild(f)}},appendHTML:function(){for(var b,c="",d=0;d<this.htmlFiles.length;d++)b=Star.GetFile(this.htmlFiles[d]),b=this.template(b,this.data),c+=b;this.container&&(this.container.innerHTML+=c)},removeListeners:function(){this.off()},destruct:function(){this.removeListeners(),this.remove()}})),Star.Localization=function(a,b){var c=Star.StarRouter.Static.getInstance();return c.localization(a,b)};